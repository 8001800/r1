const Web3 = require("web3")
//https://mainnet.infura.io/bOvbiqbRT3nMOdB2jvMg
var web3 = new Web3("https://kovan.infura.io/bOvbiqbRT3nMOdB2jvMg")
const assert=require("assert")
var json=[{"constant":true,"inputs":[],"name":"stop","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"tokenBuy","type":"address"},{"name":"amountBuy","type":"uint256"},{"name":"tokenSell","type":"address"},{"name":"amountSell","type":"uint256"},{"name":"base","type":"address"},{"name":"expires","type":"uint256"},{"name":"nonce","type":"uint256"},{"name":"feeToken","type":"address"},{"name":"channelFeeAccount","type":"address"},{"name":"channelId","type":"uint256"}],"name":"getOrderHash","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address[]"},{"name":"to","type":"address[]"},{"name":"amount","type":"uint256[]"},{"name":"channelId","type":"uint256"}],"name":"batchDepositTo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address[]"},{"name":"amount","type":"uint256[]"},{"name":"fromChannelId","type":"uint256"},{"name":"toChannelId","type":"uint256"}],"name":"batchChangeChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"applyList","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"withdrawEnabled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"withdrawNoLimit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"tokenList","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"withdrawn","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"depositToEnabled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"tokens","type":"address[]"},{"name":"channelIds","type":"uint256[]"}],"name":"refund","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"admins","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"admin","type":"address"},{"name":"isAdmin","type":"bool"}],"name":"setAdmin","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"transferEnabled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"to","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"innerTransfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"bytes32"}],"name":"orderFilled","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"changeChannelEnabled","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"applyWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"user","type":"address"},{"name":"channelId","type":"uint256"}],"name":"approveWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"users","type":"address[]"},{"name":"nonces","type":"uint256[]"},{"name":"channelId","type":"uint256"}],"name":"batchCancel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"stopTrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"enabled","type":"bool"}],"name":"enableWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"lock","type":"uint256"}],"name":"changeLockTime","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"feeRate","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"depositToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"acc","type":"address"},{"name":"asFee","type":"bool"}],"name":"setFeeAccount","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"enabled","type":"bool"}],"name":"enableDepositTo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"to","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"depositTo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"fromChannelId","type":"uint256"},{"name":"toChannelId","type":"uint256"}],"name":"changeChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"addresses","type":"address[13]"},{"name":"values","type":"uint256[15]"},{"name":"v","type":"uint8[2]"},{"name":"r","type":"bytes32[2]"},{"name":"s","type":"bytes32[2]"}],"name":"trade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"addresses","type":"address[13][]"},{"name":"values","type":"uint256[15][]"},{"name":"v","type":"uint8[2][]"},{"name":"r","type":"bytes32[2][]"},{"name":"s","type":"bytes32[2][]"}],"name":"batchTrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"fr","type":"uint256"}],"name":"changeFeeRate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"canceled","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"enabled","type":"bool"}],"name":"enableChangeChannel","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address"},{"name":"amount","type":"uint256"},{"name":"channelId","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"uint256"}],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"token","type":"address[]"},{"name":"to","type":"address[]"},{"name":"amount","type":"uint256[]"},{"name":"channelId","type":"uint256"}],"name":"batchInnerTransfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"latestApply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"feeAccounts","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"withdrawAllowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"token","type":"address"},{"name":"user","type":"address"},{"name":"channelId","type":"uint256"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"enabled","type":"bool"}],"name":"enableTransfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"applyWait","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"addresses","type":"address[4]"},{"name":"values","type":"uint256[5]"},{"name":"v","type":"uint8"},{"name":"r","type":"bytes32"},{"name":"s","type":"bytes32"}],"name":"adminWithdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"payable":false,"stateMutability":"nonpayable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"DepositTo","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"Withdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"time","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"ApplyWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"ApproveWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"maker","type":"address"},{"indexed":true,"name":"taker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"makerFee","type":"uint256"},{"indexed":false,"name":"takerFee","type":"uint256"},{"indexed":false,"name":"makerNonce","type":"uint256"},{"indexed":false,"name":"takerNonce","type":"uint256"}],"name":"Trade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"InnerTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"token","type":"address"},{"indexed":true,"name":"user","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"fromChannelId","type":"uint256"},{"indexed":false,"name":"toChannelId","type":"uint256"}],"name":"ChangeChannel","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"count","type":"uint256"},{"indexed":false,"name":"channelId","type":"uint256"}],"name":"BatchCancel","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"}]

//should be replaced when update
var code="0x608060405262015180600a908155600b55600c805461ffff191690556000600d819055600e805462ffff001960ff19919091166001171690558054600160a060020a03191633179055613ff1806100576000396000f30060806040526004361061023a5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166307da68f5811461024c5780630f4665aa1461027557806316888507146102d55780631d793e9a146103a05780632066b2e4146104375780632287e96a146104615780632c8668d4146104765780632e08c6f41461049d5780633823d66c146104c757806339dd48da146104df57806341192788146104f4578063429b62e5146105905780634b0bddd2146105b15780634cd412d5146105d757806354fd4d50146105ec5780635601da3d14610676578063560b3cba146106a357806359a13c4d146106c75780635c8b94e7146106dc5780636bf9b3e71461070357806377922e571461072d5780638baeefce146107bd5780638da5cb5b146107d257806392e33d141461080357806396cf52271461081d578063978bbdb91461083557806399c6d2de1461084a578063a4de3c1914610871578063a5609ab514610897578063a78e111c146108b1578063a95bc9a7146108de578063adf9675214610908578063af857a84146109dd578063affca93214610c1d578063b0fff5d214610c35578063b42220ad14610c59578063b5c5f67214610c73578063b6b55f2514610c9a578063bdd9f4e714610ca5578063dcfddcbb14610d6e578063e2e71f9314610d98578063e3ed7bb114610db9578063e93119d914610de3578063ef7ac0e514610e0d578063f2eaee0214610e27578063f2fde38b14610e3c578063fcf3276914610e5d575b34801561024657600080fd5b50600080fd5b34801561025857600080fd5b50610261610ed3565b604080519115158252519081900360200190f35b34801561028157600080fd5b506102c3600160a060020a03600435811690602435906044358116906064359060843581169060a4359060c4359060e435811690610104351661012435610ee1565b60408051918252519081900360200190f35b3480156102e157600080fd5b506040805160206004803580820135838102808601850190965280855261039e95369593946024949385019291829185019084908082843750506040805187358901803560208181028481018201909552818452989b9a998901989297509082019550935083925085019084908082843750506040805187358901803560208181028481018201909552818452989b9a9989019892975090820195509350839250850190849080828437509497505093359450610f689350505050565b005b3480156103ac57600080fd5b506040805160206004803580820135838102808601850190965280855261039e95369593946024949385019291829185019084908082843750506040805187358901803560208181028481018201909552818452989b9a9989019892975090820195509350839250850190849080828437509497505084359550505060209092013591506110079050565b34801561044357600080fd5b506102c3600160a060020a036004358116906024351660443561108e565b34801561046d57600080fd5b506102616110b1565b34801561048257600080fd5b5061039e600160a060020a03600435166024356044356110ba565b3480156104a957600080fd5b506102c3600160a060020a03600435811690602435166044356112aa565b3480156104d357600080fd5b506102616004356112cd565b3480156104eb57600080fd5b506102616112e2565b34801561050057600080fd5b5060408051602060046024803582810135848102808701860190975280865261039e968435600160a060020a031696369660449591949091019291829185019084908082843750506040805187358901803560208181028481018201909552818452989b9a9989019892975090820195509350839250850190849080828437509497506112eb9650505050505050565b34801561059c57600080fd5b50610261600160a060020a0360043516611548565b3480156105bd57600080fd5b5061039e600160a060020a0360043516602435151561155d565b3480156105e357600080fd5b506102616115b4565b3480156105f857600080fd5b506106016115c2565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561063b578181015183820152602001610623565b50505050905090810190601f1680156106685780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561068257600080fd5b5061039e600160a060020a03600435811690602435166044356064356115f9565b3480156106af57600080fd5b506102c3600160a060020a036004351660243561176a565b3480156106d357600080fd5b50610261611787565b3480156106e857600080fd5b5061039e600160a060020a0360043516602435604435611796565b34801561070f57600080fd5b5061039e600160a060020a03600435811690602435166044356118c2565b34801561073957600080fd5b506040805160206004803580820135838102808601850190965280855261039e95369593946024949385019291829185019084908082843750506040805187358901803560208181028481018201909552818452989b9a99890198929750908201955093508392508501908490808284375094975050933594506119e19350505050565b3480156107c957600080fd5b5061039e611b38565b3480156107de57600080fd5b506107e7611b60565b60408051600160a060020a039092168252519081900360200190f35b34801561080f57600080fd5b5061039e6004351515611b6f565b34801561082957600080fd5b5061039e600435611b99565b34801561084157600080fd5b506102c3611bc5565b34801561085657600080fd5b5061039e600160a060020a0360043516602435604435611bcb565b34801561087d57600080fd5b5061039e600160a060020a03600435166024351515611d50565b3480156108a357600080fd5b5061039e6004351515611da7565b3480156108bd57600080fd5b5061039e600160a060020a0360043581169060243516604435606435611dd1565b3480156108ea57600080fd5b5061039e600160a060020a0360043516602435604435606435611f87565b34801561091457600080fd5b50604080516101a081810190925261039e9136916004916101a491908390600d9083908390808284375050604080516101e0818101909252949796958181019594509250600f91508390839080828437505060408051808201825294979695818101959450925060029150839083908082843750506040805180820182529497969581810195945092506002915083908390808284375050604080518082018252949796958181019594509250600291508390839080828437509396506120c395505050505050565b3480156109e957600080fd5b5060408051600480358082013560208181028501810190955280845261039e943694602493909290840191819060009085015b82821015610a5957604080516101a081810190925290808402870190600d9083908390808284375050509183525050600190910190602001610a1c565b50506040805186358801803560208181028401810190945280835296999897830196919550820193509150819060009085015b82821015610ac957604080516101e081810190925290808402870190600f9083908390808284375050509183525050600190910190602001610a8c565b50506040805186358801803560208181028401810190945280835296999897830196919550820193509150819060009085015b82821015610b35576040805180820182529080840287019060029083908390808284375050509183525050600190910190602001610afc565b50506040805186358801803560208181028401810190945280835296999897830196919550820193509150819060009085015b82821015610ba1576040805180820182529080840287019060029083908390808284375050509183525050600190910190602001610b68565b50506040805186358801803560208181028401810190945280835296999897830196919550820193509150819060009085015b82821015610c0d576040805180820182529080840287019060029083908390808284375050509183525050600190910190602001610bd4565b5093965061279d95505050505050565b348015610c2957600080fd5b5061039e600435612858565b348015610c4157600080fd5b506102c3600160a060020a0360043516602435612882565b348015610c6557600080fd5b5061039e600435151561289f565b348015610c7f57600080fd5b5061039e600160a060020a03600435166024356044356128d2565b61039e600435612b9c565b348015610cb157600080fd5b506040805160206004803580820135838102808601850190965280855261039e95369593946024949385019291829185019084908082843750506040805187358901803560208181028481018201909552818452989b9a998901989297509082019550935083925085019084908082843750506040805187358901803560208181028481018201909552818452989b9a9989019892975090820195509350839250850190849080828437509497505093359450612c619350505050565b348015610d7a57600080fd5b506102c3600160a060020a0360043581169060243516604435612cfe565b348015610da457600080fd5b50610261600160a060020a0360043516612d21565b348015610dc557600080fd5b506102c3600160a060020a0360043581169060243516604435612d36565b348015610def57600080fd5b506102c3600160a060020a0360043581169060243516604435612d59565b348015610e1957600080fd5b5061039e6004351515612d8b565b348015610e3357600080fd5b506102c3612dbc565b348015610e4857600080fd5b5061039e600160a060020a0360043516612dc2565b348015610e6957600080fd5b5060408051608081810190925261039e9136916004916084919083908190839082908082843750506040805160a0818101909252949796958181019594509250600591508390839080828437509396505050823560ff169350505060208101359060400135612e56565b600c54610100900460ff1681565b604080516c010000000000000000000000003081028252600160a060020a039c8d1681026014830152602882019b909b52988b168a0260488a0152605c8901979097529489168802607c880152609087019390935260b08601919091528616850260d085015290941690920260e482015260f8810192909252519081900361011801902090565b600e5460009060ff161515610f7c57600080fd5b82518451148015610f8f575060c8845111155b1515610f9a57600080fd5b5060005b835181101561100057610ff88582815181101515610fb857fe5b906020019060200201518583815181101515610fd057fe5b906020019060200201518584815181101515610fe857fe5b9060200190602002015185611dd1565b600101610f9e565b5050505050565b600e5460009062010000900460ff16151561102157600080fd5b83518551148015611034575060c8845111155b151561103f57600080fd5b5060005b835181101561100057611086858281518110151561105d57fe5b90602001906020020151858381518110151561107557fe5b906020019060200201518585611f87565b600101611043565b600760209081526000938452604080852082529284528284209052825290205481565b600c5460ff1681565b600c5460ff1615156110cb57600080fd5b600160a060020a0383166000908152600360209081526040808320338452825280832084845290915290205482111561110357600080fd5b600160a060020a038316600090815260036020908152604080832033845282528083208484529091529020546111399083613422565b600160a060020a03841660008181526003602090815260408083203384528252808320868452909152902091909155151561119a57604051339083156108fc029084906000818181858888f19350505050151561119557600080fd5b611239565b604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152336004820152602481018490529051600160a060020a0385169163a9059cbb9160448083019260209291908290030181600087803b15801561120257600080fd5b505af1158015611216573d6000803e3d6000fd5b505050506040513d602081101561122c57600080fd5b5051151561123957600080fd5b600160a060020a03831660008181526003602090815260408083203380855290835281842086855283529281902054815187815292830152818101859052519192917febff2602b3f468259e1e99f613fed6691f3a6526effe6ef3e768ba7ae7a36c4f9181900360600190a3505050565b600360209081526000938452604080852082529284528284209052825290205481565b60056020526000908152604090205460ff1681565b600e5460ff1681565b33600090815260016020526040812054819081908190819060ff16151561131157600080fd5b600094505b865185101561153e57868581518110151561132d57fe5b906020019060200201519350600092505b855183101561153357858381518110151561135557fe5b6020908102909101810151600160a060020a038087166000908152600384526040808220928d168252918452818120838252909352822054909350915081111561152857600160a060020a038085166000818152600360209081526040808320948d168352938152838220868352905291822091909155151561140757604051600160a060020a0389169082156108fc029083906000818181858888f19350505050151561140257600080fd5b6114ba565b83600160a060020a031663a9059cbb89836040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050602060405180830381600087803b15801561148357600080fd5b505af1158015611497573d6000803e3d6000fd5b505050506040513d60208110156114ad57600080fd5b505115156114ba57600080fd5b600160a060020a038481166000818152600360209081526040808320948d168084529482528083208784528252918290205482518681529182015280820186905290517febff2602b3f468259e1e99f613fed6691f3a6526effe6ef3e768ba7ae7a36c4f9181900360600190a35b60019092019161133e565b600190940193611316565b5050505050505050565b60016020526000908152604090205460ff1681565b600054600160a060020a0316331461157457600080fd5b600160a060020a038216151561158957600080fd5b600160a060020a03919091166000908152600160205260409020805460ff1916911515919091179055565b600e54610100900460ff1681565b60408051808201909152600581527f322e302e30000000000000000000000000000000000000000000000000000000602082015281565b600e54610100900460ff16151561160f57600080fd5b600160a060020a038316151561162457600080fd5b600160a060020a0384166000908152600360209081526040808320338452825280832084845290915290205482111561165c57600080fd5b600160a060020a038416600090815260036020908152604080832033845282528083208484529091529020546116929083613422565b600160a060020a03808616600090815260036020908152604080832033845280835281842087855283528184209590955592871682529283528181208482529092529020546116e19083613434565b600160a060020a038086166000818152600360209081526040808320948916808452858352818420888552835281842096909655338084529482528083208784528252918290205482518881529182015280820186905290517f6e878aff7e74cbd83d8c07e128ce4635ed1f7d59d65d1f42d465bee84eb3460e9181900360600190a450505050565b600460209081526000928352604080842090915290825290205481565b600e5462010000900460ff1681565b600160a060020a038316600090815260076020908152604080832033845282528083208484529091528120546117cc9084613434565b600160a060020a03851660008181526003602090815260408083203380855290835281842088855283528184205494845260068352818420908452825280832087845290915290205491925090611824908390613434565b111561182f57600080fd5b600160a060020a03841660008181526007602090815260408083203380855290835281842087855283528184208690558484526008835281842081855283528184208785528352928190204290819055815188815292830152818101869052519192917f062f8db33ce66010d5d335b9de2c68f7a59521142597b70f81220b3e97f4c9939181900360600190a350505050565b3360009081526001602052604090205460ff1615156118e057600080fd5b600160a060020a03808416600081815260066020908152604080832094871680845294825280832086845282528083205493835260078252808320948352938152838220858352905291909120546119389190613434565b600160a060020a038085166000818152600660209081526040808320948816808452948252808320878452825280832095909555828252600781528482208483528152848220868352815284822082905582825260088152848220848352815284822086835281528482209190915583518581529351929391927f1c6434ded5c8badcab3e8bb92e5cc66d78f4d88ff5e81846bd329f2f81d0d2749281900390910190a3505050565b33600090815260016020526040812054819060ff161515611a0157600080fd5b8351855114611a0f57600080fd5b5060009050805b8451811015611af657600960008683815181101515611a3157fe5b90602001906020020151600160a060020a0316600160a060020a031681526020019081526020016000206000848152602001908152602001600020548482815181101515611a7b57fe5b602090810290910101511015611a9057600080fd5b8381815181101515611a9e57fe5b90602001906020020151600960008784815181101515611aba57fe5b6020908102909101810151600160a060020a03168252818101929092526040908101600090812087825290925290205560019182019101611a16565b604080518381526020810185905281517feeea1444156f4442f9b8876353b17a5efc18632b2d1e773930c1a3303d5cba9e929181900390910190a15050505050565b600054600160a060020a03163314611b4f57600080fd5b600c805461ff001916610100179055565b600054600160a060020a031681565b600054600160a060020a03163314611b8657600080fd5b600c805460ff1916911515919091179055565b600054600160a060020a03163314611bb057600080fd5b62093a80811115611bc057600080fd5b600a55565b600b5481565b600160a060020a0383161515611be057600080fd5b600160a060020a03831660009081526003602090815260408083203384528252808320848452909152902054611c169083613434565b600160a060020a03841660008181526003602090815260408083203380855290835281842087855283528184209590955580517f23b872dd0000000000000000000000000000000000000000000000000000000081526004810195909552306024860152604485018790525192936323b872dd9360648083019491928390030190829087803b158015611ca857600080fd5b505af1158015611cbc573d6000803e3d6000fd5b505050506040513d6020811015611cd257600080fd5b50511515611cdf57600080fd5b600160a060020a03831660008181526003602090815260408083203380855290835281842086855283529281902054815187815292830152818101859052519192917f4e2ca0515ed1aef1395f66b5303bb5d6f1bf9d61a353fa53f73f8ac9973fa9f69181900360600190a3505050565b600054600160a060020a03163314611d6757600080fd5b600160a060020a0382161515611d7c57600080fd5b600160a060020a03919091166000908152600260205260409020805460ff1916911515919091179055565b600054600160a060020a03163314611dbe57600080fd5b600e805460ff1916911515919091179055565b600e5460ff161515611de257600080fd5b600160a060020a03841615801590611e025750600160a060020a03831615155b1515611e0d57600080fd5b600160a060020a038085166000908152600360209081526040808320938716835292815282822084835290522054611e459083613434565b600160a060020a038086166000818152600360209081526040808320948916835293815283822086835281528382209490945582517f23b872dd00000000000000000000000000000000000000000000000000000000815233600482015230602482015260448101879052925191936323b872dd936064808201949293918390030190829087803b158015611ed957600080fd5b505af1158015611eed573d6000803e3d6000fd5b505050506040513d6020811015611f0357600080fd5b50511515611f1057600080fd5b600160a060020a0384811660008181526003602090815260408083209488168084529482528083208684528252918290205482518781529182015280820185905290513392917fb8549480a740327017d760034cf7d1b112890eb0948c99dbd7da38738096f759919081900360600190a450505050565b600e5462010000900460ff161515611f9e57600080fd5b600160a060020a03841660009081526003602090815260408083203384528252808320858452909152902054831115611fd657600080fd5b600160a060020a0384166000908152600360209081526040808320338452825280832085845290915290205461200c9084613422565b600160a060020a0385166000908152600360209081526040808320338452825280832086845290915280822092909255828152205461204b9084613434565b600160a060020a038516600081815260036020908152604080832033808552908352818420878552835292819020949094558351878152908101869052808401859052925190927fbb69f2324604d3dc028e651782c9bc2152cb34213ecb64bb5c2312ab3dabf696919081900360600190a350505050565b6120cb613ee0565b6120d3613ee0565b3360009081526001602052604081205460ff1615156120f157600080fd5b610140880151600160a060020a03811660009081526002602052604090205460ff16151561211e57600080fd5b600c54610100900460ff161561213357600080fd5b604080516101c08101909152808a600060209081029190910151600160a060020a03168252018a600260209081029190910151600160a060020a031682520189600060209081029190910151825201896002602090810291909101518252018a600460209081029190910151600160a060020a031682520189600460209081029190910151825201896006602090810291909101518252018960086020908102919091015182526000908201526040018a600660209081029190910151600160a060020a03168252018a600860209081029190910151600160a060020a03168252018a600b60209081029190910151600160a060020a031682520189600b6020908102919091015182520189600d60200201519052604080516101c08101909152909450808a600160209081029190910151600160a060020a03168252018a600360209081029190910151600160a060020a031682520189600160209081029190910151825201896003602090810291909101518252018a600560209081029190910151600160a060020a031682520189600560209081029190910151825201896007602090810291909101518252018960096020908102919091015182526000908201526040018a600760209081029190910151600160a060020a03168252018a600960209081029190910151600160a060020a03168252018a600c60209081029190910151600160a060020a031682520189600c6020908102919091015182520189600e60200201519052925087600a60200201519150438460c00151101580156123845750438360c0015110155b151561238f57600080fd5b6080840151600160a060020a031660009081526009602090815260408083206101a0880151845290915290205460e0850151108015906123ff57506080830151600160a060020a031660009081526009602090815260408083206101a0870151845290915290205460e084015110155b151561240a57600080fd5b826101200151600160a060020a0316846101200151600160a060020a031614801561244e57508260200151600160a060020a03168460000151600160a060020a0316145b801561247357508260000151600160a060020a03168460200151600160a060020a0316145b151561247e57600080fd5b8260000151600160a060020a0316836101200151600160a060020a031614806124c157508260200151600160a060020a0316836101200151600160a060020a0316145b15156124cc57600080fd5b61250a84600001518560400151866020015187606001518861012001518960c001518a60e001518b61014001518c61016001518d6101a00151610ee1565b610100850152825160408401516020850151606086015161012087015160c088015160e08901516101408a01516101608b01516101a08c015161255599989796959493929190610ee1565b6101008481019190915260808581015191860151604080517f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810192909252805191829003603c0182208b518b518b51600080875260208088018088529590955260ff909316868601526060860191909152948401949094529051600160a060020a039094169360019360a080850194601f198401939081900390910191865af115801561260b573d6000803e3d6000fd5b50505060206040510351600160a060020a031614151561262a57600080fd5b608083810151610100850151604080517f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810192909252805191829003603c01822060208c8101518c8201518c83015160008088528488018088529590955260ff909216868601526060860152958401959095529051600160a060020a039093169360019360a0808501949293601f198301938390039091019190865af11580156126dd573d6000803e3d6000fd5b50505060206040510351600160a060020a03161415156126fc57600080fd5b61270f84848b600a60200201518561344a565b8260800151600160a060020a03168460800151600160a060020a03167f01f5d7c359dba416997ea6c723ea4663e9ad524f956ed8bb3b5234e6475a7285848760a001518760a001518960e001518960e00151604051808681526020018581526020018481526020018381526020018281526020019550505050505060405180910390a3505050505050505050565b3360009081526001602052604081205460ff1615156127bb57600080fd5b5060005b85518110156128505761284886828151811015156127d957fe5b9060200190602002015186838151811015156127f157fe5b90602001906020020151868481518110151561280957fe5b90602001906020020151868581518110151561282157fe5b90602001906020020151868681518110151561283957fe5b906020019060200201516120c3565b6001016127bf565b505050505050565b600054600160a060020a0316331461286f57600080fd5b600a81101561287d57600080fd5b600b55565b600960209081526000928352604080842090915290825290205481565b600054600160a060020a031633146128b657600080fd5b600e8054911515620100000262ff000019909216919091179055565b600160a060020a0383166000908152600360209081526040808320338452825280832084845290915290205482111561290a57600080fd5b600160a060020a03831660009081526006602090815260408083203384528252808320848452909152902054821115612a5a57600160a060020a03831660009081526008602090815260408083203384528252808320848452909152902054158015906129ae5750600a54600160a060020a038416600090815260086020908152604080832033845282528083208584529091529020546129ac904290613422565b115b15156129b957600080fd5b600160a060020a038316600081815260066020908152604080832033808552908352818420868552835281842054948452600783528184209084528252808320858452909152902054612a0c9190613434565b600160a060020a038416600081815260066020908152604080832033808552908352818420878552835281842095909555928252600781528282209382529283528181208482529092528120555b600160a060020a03831660009081526006602090815260408083203384528252808320848452909152902054821115612a9257600080fd5b600160a060020a03831660009081526006602090815260408083203384528252808320848452909152902054612ac89083613422565b600160a060020a03841660008181526006602090815260408083203380855290835281842087855283528184209590955592825260038152828220938252928352818120848252909252902054612b1f9083613422565b600160a060020a03841660008181526003602090815260408083203380855290835281842087855283528184209590955583835260088252808320948352938152838220858352905291822091909155151561119a57604051339083156108fc029084906000818181858888f19350505050151561119557600080fd5b3360009081527f3617319a054d772f909f7c479a2cebe5066e836a939412e32403c99029b92eff60209081526040808320848452909152902054612be09034613434565b3360008181527f3617319a054d772f909f7c479a2cebe5066e836a939412e32403c99029b92eff6020908152604080832086845282528083208590558051348152918201949094528084018590529251919290917f4e2ca0515ed1aef1395f66b5303bb5d6f1bf9d61a353fa53f73f8ac9973fa9f69181900360600190a350565b600e54600090610100900460ff161515612c7a57600080fd5b82518451148015612c8d575060c8845111155b1515612c9857600080fd5b5060005b835181101561100057612cf68582815181101515612cb657fe5b906020019060200201518583815181101515612cce57fe5b906020019060200201518584815181101515612ce657fe5b90602001906020020151856115f9565b600101612c9c565b600860209081526000938452604080852082529284528284209052825290205481565b60026020526000908152604090205460ff1681565b600660209081526000938452604080852082529284528284209052825290205481565b600160a060020a0392831660009081526003602090815260408083209490951682529283528381209181529152205490565b600054600160a060020a03163314612da257600080fd5b600e80549115156101000261ff0019909216919091179055565b600a5481565b600054600160a060020a03163314612dd957600080fd5b600160a060020a0381161515612dee57600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b612e5e613f54565b3360009081526001602052604081205460ff161515612e7c57600080fd5b604080880151600160a060020a03811660009081526002602052919091205460ff161515612ea957600080fd5b60408051610120810182528951600160a060020a0390811682526020808c015182168184018190528c8501518316848601526060808e01518416818601528c5160808087019182528e85015160a08801528e88015160c0880152918e015160e0870152908d01516101008601908152600092835260038452868320865190951683529383528582209351825292909152929092205491519094501115612f4e57600080fd5b612f6083608001518460c00151613b05565b60c0840152608083015160e0840151612f799190613b05565b60e08401528251602080850151608086015160a087015160408089015160608a01516101008b015183516c010000000000000000000000003081028252600160a060020a039a8b1681026014830152978a1688026028820152603c810196909652605c8601949094529087168502607c85015295909516909202609082015260a481019190915282519081900360c4019020600081815260059092529190205490925060ff161561302957600080fd5b6000828152600560209081526040808320805460ff19166001908117909155865182517f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c8101889052835190819003603c0181208682528186018086525260ff8c1681850152606081018b9052608081018a90529251600160a060020a0390911694919360a0808501949193601f19840193928390039091019190865af11580156130dc573d6000803e3d6000fd5b50505060206040510351600160a060020a03161415156130fb57600080fd5b602080840151600160a060020a03908116600090815260038352604080822087519093168252918352818120610100870151825290925290205460808401516131449190613422565b60208085018051600160a060020a039081166000908152600380855260408083208a518516845286528083206101008b015184528652808320969096559251821681529183528382208488015190911682528252828120600d548252909152205460c08401516131b49190613434565b60208085018051600160a060020a03908116600090815260038085526040808320818b0151851684528652808320600d5484528652808320969096559251821681529183528382206060880151909116825282528281206101008701518252909152205460e08401516132279190613434565b602080850151600160a060020a039081166000908152600383526040808220606089015190931682529183528181206101008801518252909252902055608083015160c08401516132789190613422565b6080840181905260e084015161328e9190613422565b60808401526020830151600160a060020a031615156132e35782516080840151604051600160a060020a039092169181156108fc0291906000818181858888f1935050505015156132de57600080fd5b61338f565b60208084015184516080860151604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039384166004820152602481019290925251919092169263a9059cbb92604480820193918290030181600087803b15801561335857600080fd5b505af115801561336c573d6000803e3d6000fd5b505050506040513d602081101561338257600080fd5b5051151561338f57600080fd5b82516020808501516080860151600160a060020a0391821660008181526003855260408082208a518616835286528082206101008b01805184529087529181902054915181519485529584019190915282810194909452925191909316927febff2602b3f468259e1e99f613fed6691f3a6526effe6ef3e768ba7ae7a36c4f919081900360600190a35050505050505050565b60008183101561342e57fe5b50900390565b60008282018381101561344357fe5b9392505050565b60008060008061346288604001518860400151613b34565b61347489606001518960600151613b34565b101561347f57600080fd5b60009350600092508660000151600160a060020a0316876101200151600160a060020a031614156136765760408089015160808a0151600160a060020a03166000908152600460209081528382206101008d01518352905291909120546134e69190613422565b60608801516080890151600160a060020a031660009081526004602090815260408083206101008d0151845290915290205491935061352491613422565b90506000851180156135365750818511155b80156135425750808511155b151561354d57600080fd5b8492508760400151613563896060015185613b34565b81151561356c57fe5b6080890151600160a060020a031660009081526004602090815260408083206101008d0151845290915290205491900494506135a89084613434565b600460008960800151600160a060020a0316600160a060020a0316815260200190815260200160002060008961010001516000191660001916815260200190815260200160002081905550613644600460008a60800151600160a060020a0316600160a060020a0316815260200190815260200160002060008a6101000151600019166000191681526020019081526020016000205484613434565b6080890151600160a060020a031660009081526004602090815260408083206101008d0151845290915290205561383e565b6040808801516080890151600160a060020a03166000908152600460209081528382206101008c01518352905291909120546136b29190613422565b606089015160808a0151600160a060020a031660009081526004602090815260408083206101008e015184529091529020549192506136f091613422565b91506000851180156137025750818511155b801561370e5750808511155b151561371957600080fd5b849350876060015161372f896040015186613b34565b81151561373857fe5b6080890151600160a060020a031660009081526004602090815260408083206101008d0151845290915290205491900493506137749085613434565b600460008960800151600160a060020a0316600160a060020a0316815260200190815260200160002060008961010001516000191660001916815260200190815260200160002081905550613810600460008a60800151600160a060020a0316600160a060020a0316815260200190815260200160002060008a6101000151600019166000191681526020019081526020016000205485613434565b6080890151600160a060020a031660009081526004602090815260408083206101008d015184529091529020555b602080880151600160a060020a03908116600090815260038352604080822060808c015190931682529183528181206101a08b015182529092529020546138859084613422565b602080890151600160a060020a0390811660009081526003808452604080832060808e018051861685529086528184206101a08f0180518652908752828520979097558d518516845291855280832091519093168252835281812093518152929091529020546138f59085613434565b600360008960000151600160a060020a0316600160a060020a0316815260200190815260200160002060008960800151600160a060020a0316600160a060020a031681526020019081526020016000206000896101a001518152602001908152602001600020819055506139cf600360008a60200151600160a060020a0316600160a060020a0316815260200190815260200160002060008a60800151600160a060020a0316600160a060020a0316815260200190815260200160002060008a6101a0015181526020019081526020016000205485613422565b600360008a60200151600160a060020a0316600160a060020a0316815260200190815260200160002060008a60800151600160a060020a0316600160a060020a0316815260200190815260200160002060008a6101a00151815260200190815260200160002081905550613aa9600360008a60000151600160a060020a0316600160a060020a0316815260200190815260200160002060008a60800151600160a060020a0316600160a060020a0316815260200190815260200160002060008a6101a0015181526020019081526020016000205484613434565b8851600160a060020a03908116600090815260036020908152604080832060808e015190941683529281528282206101a08d0151835290522055613aee888785613b58565b50613afa878786613b58565b505050505050505050565b60008082905083613b1884600b54613b34565b111561344357600b5484811515613b2b57fe5b04949350505050565b6000828202831580613b505750828482811515613b4d57fe5b04145b151561344357fe5b6101408301516000908190600160a060020a031615613d4157613b848560a00151866101800151613434565b610140860151600160a060020a03908116600090815260036020908152604080832060808b015190941683529281528282206101a08a0151835290522054909150811115613bd157600080fd5b610140850151600160a060020a0390811660009081526003602090815260408083209388168352928152828220600d5483529052205460a0860151613c169190613434565b61014086018051600160a060020a0390811660009081526003602081815260408084208b861685528252808420600d54855282528084209690965593518316825283528381206101608a015190921681529082528281206101a08901518252909152205460a0860151613c899190613434565b61014086018051600160a060020a0390811660009081526003602081815260408084206101608d01518616855282528084206101a08d01805186529083528185209790975594518416835290815283822060808b0151909316825291825282812093518152929052902054613cfe9082613422565b610140860151600160a060020a03908116600090815260036020908152604080832060808b015190941683529281528282206101a08a0151835290522055613ed8565b613d4f838660a00151613b05565b60a0860152610180850151613d65908490613b05565b610180860181905260a0860151613d7b91613434565b8551600160a060020a0390811660009081526003602090815260408083209389168352928152828220600d5483529052205460a0870151919250613dbe91613434565b8551600160a060020a0390811660009081526003602081815260408084208a861685528252808420600d5485528252808420959095558951841683529081528382206101608a015190931682529182528281206101a08901518252909152205460a0860151613e2d9190613434565b8551600160a060020a0390811660009081526003602081815260408084206101608c01518616855282528084206101a08c0180518652908352818520969096558a518516845291815281832060808b0151909416835292835280822093518252929091522054613e9d9082613422565b8551600160a060020a03908116600090815260036020908152604080832060808b015190941683529281528282206101a08a01518352905220555b509392505050565b604080516101c081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081019190915290565b610120604051908101604052806000600160a060020a031681526020016000600160a060020a031681526020016000600160a060020a031681526020016000600160a060020a03168152602001600081526020016000815260200160008152602001600081526020016000815250905600a165627a7a72305820e343727024bf98e62e05d7d42f67fbee925a041126e2d729ab7a5f753f8712ef0029"

var account=web3.eth.accounts.wallet.add("0x5c4296a778e2c785aa344b8166be02dbbd7bf59396e1a2ea77aaa21cde25994e")//test account
var admin="0x031d8da61261bc51e95affcc74359bbd6fcf388d",feeAcc="0x00B9022a6b81E954129d6f807d7c9F3274820176"

it("deploy", async () => {
    await deployContract(account,json,code,[])

})
it("initial params",async()=>{
    //contract address from step 1:deploy contract
    var contractAddr="0xe083E4605E43BF55AeC5285e23c0E464Db100bbC"
    var myContract = new web3.eth.Contract(json,contractAddr)

    var result=await myContract.methods.setAdmin(admin,true).send({from:account.address,gas:100000})

    assert.equal(result.status, 1, "set admin failed")
    result=await myContract.methods.setFeeAccount(feeAcc,true).send({from:account.address,gas:100000})

    assert.equal(result.status, 1, "set fee account failed")
})

function deployContract(account,abi, code, arguments) {
    var myContract = new web3.eth.Contract(abi)
    return myContract.deploy({
        data: code,
        arguments: arguments
    }).send({
        from: account.address,
        gasPrice: web3.utils.toWei("10", "gwei"),
        gas: 5000000
    })
        .on('error', console.log)
        .on('receipt', console.log)
}